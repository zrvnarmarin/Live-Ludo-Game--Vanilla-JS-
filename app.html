<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ludo Game</title>
    <link rel="stylesheet" href="board.css">
    <script src="https://kit.fontawesome.com/2fd1fc0d1b.js" crossorigin="anonymous"></script>
    <script src="app.js" defer></script>
</head>
<body>

    <div class="board">
        <!-- First row -->
        <div class="first-row">
            <div class="start-area-wrapper blue-player-start-area-wrapper">
                <div class="start-area">
                    <div class="start-area-player-ring blue-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring blue-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring blue-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring blue-player-start-area-player-ring"></div>
                </div>
            </div>
            <div class="board-squares">
                <div class="board-square"></div>
                <div class="board-square board-square-arrow-holder">
                    <i class="fa-sharp fa-solid fa-arrow-down yellow-arrow"></i>
                </div>
                <div class="board-square"></div>
                <div class="board-square"></div>
                <div class="board-square yellow-player-board-square"></div>
                <div class="board-square yellow-player-board-square"></div>
                <div class="board-square"></div>
                <div class="board-square yellow-player-board-square"></div>
                <div class="board-square"></div>
                <div class="board-square"></div>
                <div class="board-square yellow-player-board-square"></div>
                <div class="board-square"></div>
                <div class="board-square"></div>
                <div class="board-square yellow-player-board-square"></div>
                <div class="board-square"></div>
                <div class="board-square"></div>
                <div class="board-square yellow-player-board-square"></div>
                <div class="board-square"></div>
            </div>
            <div class="start-area-wrapper yellow-player-start-area-wrapper">
                <div class="start-area">
                    <div class="start-area-player-ring yellow-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring yellow-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring yellow-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring yellow-player-start-area-player-ring"></div>
                </div>
            </div>
        </div>
        
        <!-- Second row -->
        <div class="second-row">
        <div class="board-squares-rotated">
            <div class="board-square"></div>
            <div class="board-square blue-player-board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square board-square-arrow-holder">
                <i class="fa-sharp fa-solid fa-arrow-right blue-arrow"></i>
            </div>
            <div class="board-square blue-player-board-square"></div>
            <div class="board-square blue-player-board-square"></div>
            <div class="board-square blue-player-board-square"></div>
            <div class="board-square blue-player-board-square"></div>
            <div class="board-square blue-player-board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
        </div>
        <div class="triangles-center"></div>
        <div class="board-squares-rotated">
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square green-player-board-square"></div>
            <div class="board-square green-player-board-square"></div>
            <div class="board-square green-player-board-square"></div>
            <div class="board-square green-player-board-square"></div>
            <div class="board-square green-player-board-square"></div>
            <div class="board-square board-square-arrow-holder">
                <i class="fa-sharp fa-solid fa-arrow-left green-arrow"></i>
            </div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square"></div>
            <div class="board-square green-player-board-square"></div>
            <div class="board-square"></div>
        </div>
        </div>

        <!-- Third row -->
        <div class="third-row">
            <div class="start-area-wrapper red-player-start-area-wrapper">
                <div class="start-area">
                    <div class="start-area-player-ring red-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring red-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring red-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring red-player-start-area-player-ring"></div>
                </div>
            </div>
            <div class="board-squares">
                <div class="board-square"></div>
                <div class="board-square red-player-board-square"></div>
                <div class="board-square"></div>
                <div class="board-square"></div>
                <div class="board-square red-player-board-square"></div>
                <div class="board-square"></div>
                <div class="board-square"></div>
                <div class="board-square red-player-board-square"></div>
                <div class="board-square"></div>
                <div class="board-square"></div>
                <div class="board-square red-player-board-square"></div>
                <div class="board-square"></div>
                <div class="board-square red-player-board-square"></div>
                <div class="board-square red-player-board-square"></div>
                <div class="board-square"></div>
                <div class="board-square"></div>
                <div class="board-square board-square-arrow-holder">
                    <i class="fa-sharp fa-solid fa-arrow-up red-arrow"></i>
                </div>
                <div class="board-square"></div>
            </div>
            <div class="start-area-wrapper green-player-start-area-wrapper">
                <div class="start-area">
                    <div class="start-area-player-ring green-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring green-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring green-player-start-area-player-ring"></div>
                    <div class="start-area-player-ring green-player-start-area-player-ring"></div>
                </div>
            </div>
        </div>

    </div>

    <script type="module" defer> 
        import {getElementOriginPoint, getElementPositionRelativeToTheViewport} from './utillityFunctions.js'
        
        const boardSquares = [...document.getElementsByClassName('board-square')]
        const player = document.querySelector('.test-player-div')
        const board = document.querySelector('.board')
        
        const wayPoints = []
        boardSquares.forEach((boardSquare, index) => {

            // const player = document.createElement('div')
            // player.classList.add('test-player-div')

            // Create a waypoint
            const waypoint = {
                boardSquare: boardSquare,
                wayPointIndex: index,
                x: getElementPositionRelativeToTheViewport(boardSquares[index]).left + getElementOriginPoint(boardSquares[index]).x / 2,
                y: getElementPositionRelativeToTheViewport(boardSquares[index]).top + getElementOriginPoint(boardSquares[index]).y / 2
            }
            wayPoints.push(waypoint)

            // Visualizing waypoint
            // player.style.top = getElementPositionRelativeToTheViewport(boardSquares[index]).top + getElementOriginPoint(boardSquares[index]).y / 2 + 'px'
            // player.style.left = getElementPositionRelativeToTheViewport(boardSquares[index]).left + getElementOriginPoint(boardSquares[index]).x / 2 + 'px'
            // player.style.backgroundColor = 'yellow'

            // boardSquare.append(player)
        })
        console.log('waypoints: ', wayPoints)

        // Displaying waypoint indexes on each board square
        wayPoints.forEach(waypoint => {
            const {boardSquare, wayPointIndex} = waypoint
            const index = document.createElement('p')
            index.innerText = wayPointIndex
            boardSquare.append(index)
        })

        // Movement
        let index = -1

        const testPlayer = document.createElement('div')
        testPlayer.classList.add('test-player-div')

        let interval = setInterval(() => {
            index++
            const { boardSquare, x, y } = wayPoints[index]
            testPlayer.style.top = y + 'px'
            testPlayer.style.left = x + 'px'
            boardSquare.append(testPlayer)

            console.log(boardSquare, y, x)
            console.log(testPlayer.style.top, testPlayer.style.left)

            if (index === wayPoints[70]) console.log('gotov krug!')
        }, 2000)

    </script>

    
    
    <style>
        .test-player-div {
            width: 23.5px;
            height: 23.5px;
            background-color: blue;
            border: 1px solid black;
            border-radius: 50%;
            left: 50px;
            top: 50px;
            transition: left .5s ease-in, top .5s ease-in;
            position: absolute;
        }

        .board {
            position: relative;
        }
        
    </style>

</body>
</html>